var S=Object.defineProperty,D=e=>S(e,"__esModule",{value:!0}),F=(e,t)=>()=>(t||(t={exports:{}},e(t.exports,t)),t.exports),M=(e,t)=>{for(var r in t)S(e,r,{get:t[r],enumerable:!0})},I=F(e=>{D(e),M(e,{Browser:()=>r,BrowserWeb:()=>t});var t=class extends j{constructor(){super();this._lastWindow=null}async open(s){this._lastWindow=window.open(s.url,s.windowName||"_blank")}async close(){return new Promise((s,n)=>{this._lastWindow!=null?(this._lastWindow.close(),this._lastWindow=null,s()):n("No active window to close!")})}},r=new t});/*! Capacitor: https://capacitorjs.com/ - MIT License */var P;(function(e){e.Unimplemented="UNIMPLEMENTED",e.Unavailable="UNAVAILABLE"})(P||(P={}));var _=class extends Error{constructor(e,t,r){super(e);this.message=e,this.code=t,this.data=r}},K=e=>{var t,r;return(e==null?void 0:e.androidBridge)?"android":((r=(t=e==null?void 0:e.webkit)===null||t===void 0?void 0:t.messageHandlers)===null||r===void 0?void 0:r.bridge)?"ios":"web"},G=e=>{const t=e.CapacitorCustomPlatform||null,r=e.Capacitor||{},s=r.Plugins=r.Plugins||{},n=()=>t!==null?t.name:K(e),o=()=>n()!=="web",c=i=>{const l=g.get(i);return!!((l==null?void 0:l.platforms.has(n()))||a(i))},a=i=>{var l;return(l=r.PluginHeaders)===null||l===void 0?void 0:l.find(L=>L.name===i)},f=i=>e.console.error(i),g=new Map,k=(i,l={})=>{const L=g.get(i);if(L)return console.warn(`Capacitor plugin "${i}" already registered. Cannot register plugins twice.`),L.proxy;const m=n(),p=a(i);let v;const H=async()=>(!v&&m in l?v=typeof l[m]=="function"?v=await l[m]():v=l[m]:t!==null&&!v&&"web"in l&&(v=typeof l.web=="function"?v=await l.web():v=l.web),v),R=(d,u)=>{var w,b;if(p){const y=p==null?void 0:p.methods.find(h=>u===h.name);if(y)return y.rtype==="promise"?h=>r.nativePromise(i,u.toString(),h):(h,E)=>r.nativeCallback(i,u.toString(),h,E);if(d)return(w=d[u])===null||w===void 0?void 0:w.bind(d)}else{if(d)return(b=d[u])===null||b===void 0?void 0:b.bind(d);throw new _(`"${i}" plugin is not implemented on ${m}`,P.Unimplemented)}},x=d=>{let u;const w=(...b)=>{const y=H().then(h=>{const E=R(h,d);if(E){const C=E(...b);return u=C==null?void 0:C.remove,C}else throw new _(`"${i}.${d}()" is not implemented on ${m}`,P.Unimplemented)});return d==="addListener"&&(y.remove=async()=>u()),y};return w.toString=()=>`${d.toString()}() { [capacitor code] }`,Object.defineProperty(w,"name",{value:d,writable:!1,configurable:!1}),w},U=x("addListener"),W=x("removeListener"),q=(d,u)=>{const w=U({eventName:d},u),b=async()=>{const h=await w;W({eventName:d,callbackId:h},u)},y=new Promise(h=>w.then(()=>h({remove:b})));return y.remove=async()=>{console.warn("Using addListener() without 'await' is deprecated."),await b()},y},O=new Proxy({},{get(d,u){switch(u){case"$$typeof":return;case"toJSON":return()=>({});case"addListener":return p?q:U;case"removeListener":return W;default:return x(u)}}});return s[i]=O,g.set(i,{name:i,proxy:O,platforms:new Set([...Object.keys(l),...p?[m]:[]])}),O};return r.convertFileSrc||(r.convertFileSrc=i=>i),r.getPlatform=n,r.handleError=f,r.isNativePlatform=o,r.isPluginAvailable=c,r.registerPlugin=k,r.Exception=_,r.DEBUG=!!r.DEBUG,r.isLoggingEnabled=!!r.isLoggingEnabled,r},z=e=>e.Capacitor=G(e),$=z(typeof globalThis!="undefined"?globalThis:typeof self!="undefined"?self:typeof window!="undefined"?window:typeof globalThis!="undefined"?globalThis:{}),A=$.registerPlugin,j=class{constructor(){this.listeners={},this.retainedEventArguments={},this.windowListeners={}}addListener(e,t){let r=!1;this.listeners[e]||(this.listeners[e]=[],r=!0),this.listeners[e].push(t);const n=this.windowListeners[e];n&&!n.registered&&this.addWindowListener(n),r&&this.sendRetainedArgumentsForEvent(e);const o=async()=>this.removeListener(e,t);return Promise.resolve({remove:o})}async removeAllListeners(){this.listeners={};for(const e in this.windowListeners)this.removeWindowListener(this.windowListeners[e]);this.windowListeners={}}notifyListeners(e,t,r){const s=this.listeners[e];if(!s){if(r){let n=this.retainedEventArguments[e];n||(n=[]),n.push(t),this.retainedEventArguments[e]=n}return}s.forEach(n=>n(t))}hasListeners(e){var t;return!!((t=this.listeners[e])===null||t===void 0?void 0:t.length)}registerWindowListener(e,t){this.windowListeners[t]={registered:!1,windowEventName:e,pluginEventName:t,handler:r=>{this.notifyListeners(t,r)}}}unimplemented(e="not implemented"){return new $.Exception(e,P.Unimplemented)}unavailable(e="not available"){return new $.Exception(e,P.Unavailable)}async removeListener(e,t){const r=this.listeners[e];if(!r)return;const s=r.indexOf(t);this.listeners[e].splice(s,1),this.listeners[e].length||this.removeWindowListener(this.windowListeners[e])}addWindowListener(e){window.addEventListener(e.windowEventName,e.handler),e.registered=!0}removeWindowListener(e){!e||(window.removeEventListener(e.windowEventName,e.handler),e.registered=!1)}sendRetainedArgumentsForEvent(e){const t=this.retainedEventArguments[e];!t||(delete this.retainedEventArguments[e],t.forEach(r=>{this.notifyListeners(e,r)}))}},B=e=>encodeURIComponent(e).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape),T=e=>e.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent),J=class extends j{async getCookies(){const e=document.cookie,t={};return e.split(";").forEach(r=>{if(r.length<=0)return;let[s,n]=r.replace(/=/,"CAP_COOKIE").split("CAP_COOKIE");s=T(s).trim(),n=T(n).trim(),t[s]=n}),t}async setCookie(e){try{const t=B(e.key),r=B(e.value),s=`; expires=${(e.expires||"").replace("expires=","")}`,n=(e.path||"/").replace("path=",""),o=e.url!=null&&e.url.length>0?`domain=${e.url}`:"";document.cookie=`${t}=${r||""}${s}; path=${n}; ${o};`}catch(t){return Promise.reject(t)}}async deleteCookie(e){try{document.cookie=`${e.key}=; Max-Age=0`}catch(t){return Promise.reject(t)}}async clearCookies(){try{const e=document.cookie.split(";")||[];for(const t of e)document.cookie=t.replace(/^ +/,"").replace(/=.*/,`=;expires=${new Date().toUTCString()};path=/`)}catch(e){return Promise.reject(e)}}async clearAllCookies(){try{await this.clearCookies()}catch(e){return Promise.reject(e)}}};A("CapacitorCookies",{web:()=>new J});var V=async e=>new Promise((t,r)=>{const s=new FileReader;s.onload=()=>{const n=s.result;t(n.indexOf(",")>=0?n.split(",")[1]:n)},s.onerror=n=>r(n),s.readAsDataURL(e)}),Q=(e={})=>{const t=Object.keys(e);return Object.keys(e).map(n=>n.toLocaleLowerCase()).reduce((n,o,c)=>(n[o]=e[t[c]],n),{})},X=(e,t=!0)=>e?Object.entries(e).reduce((s,n)=>{const[o,c]=n;let a,f;return Array.isArray(c)?(f="",c.forEach(g=>{a=t?encodeURIComponent(g):g,f+=`${o}=${a}&`}),f.slice(0,-1)):(a=t?encodeURIComponent(c):c,f=`${o}=${a}`),`${s}&${f}`},"").substr(1):null,Y=(e,t={})=>{const r=Object.assign({method:e.method||"GET",headers:e.headers},t),n=Q(e.headers)["content-type"]||"";if(typeof e.data=="string")r.body=e.data;else if(n.includes("application/x-www-form-urlencoded")){const o=new URLSearchParams;for(const[c,a]of Object.entries(e.data||{}))o.set(c,a);r.body=o.toString()}else if(n.includes("multipart/form-data")||e.data instanceof FormData){const o=new FormData;if(e.data instanceof FormData)e.data.forEach((a,f)=>{o.append(f,a)});else for(const a of Object.keys(e.data))o.append(a,e.data[a]);r.body=o;const c=new Headers(r.headers);c.delete("content-type"),r.headers=c}else(n.includes("application/json")||typeof e.data=="object")&&(r.body=JSON.stringify(e.data));return r},Z=class extends j{async request(e){const t=Y(e,e.webFetchExtra),r=X(e.params,e.shouldEncodeUrlParams),s=r?`${e.url}?${r}`:e.url,n=await fetch(s,t),o=n.headers.get("content-type")||"";let{responseType:c="text"}=n.ok?e:{};o.includes("application/json")&&(c="json");let a,f;switch(c){case"arraybuffer":case"blob":f=await n.blob(),a=await V(f);break;case"json":a=await n.json();break;case"document":case"text":default:a=await n.text()}const g={};return n.headers.forEach((k,i)=>{g[i]=k}),{data:a,headers:g,status:n.status,url:n.url}}async get(e){return this.request(Object.assign(Object.assign({},e),{method:"GET"}))}async post(e){return this.request(Object.assign(Object.assign({},e),{method:"POST"}))}async put(e){return this.request(Object.assign(Object.assign({},e),{method:"PUT"}))}async patch(e){return this.request(Object.assign(Object.assign({},e),{method:"PATCH"}))}async delete(e){return this.request(Object.assign(Object.assign({},e),{method:"DELETE"}))}};A("CapacitorHttp",{web:()=>new Z});var N=A("Browser",{web:()=>Promise.resolve().then(()=>I()).then(e=>new e.BrowserWeb)});export{N as Browser};
